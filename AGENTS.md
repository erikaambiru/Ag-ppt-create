# AGENTS

PPTX è‡ªå‹•ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ã€‚

## è¨­è¨ˆåŸå‰‡

| åŸå‰‡                  | èª¬æ˜                                             |
| --------------------- | ------------------------------------------------ |
| **SSOT**              | å„ãƒ«ãƒ¼ãƒ«ã¯ 1 ç®‡æ‰€ã®ã¿ã§å®šç¾©ã—ã€ä»–ã¯å‚ç…§          |
| **Agent vs Script**   | AI åˆ¤æ–­ãŒå¿…è¦ â†’ Agentã€æ±ºå®šè«–çš„ â†’ Script         |
| **IR åˆ†é›¢**           | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã¯ JSONï¼ˆcontent.jsonï¼‰ã§ç–çµåˆ    |
| **Fail Fast**         | ã‚¨ãƒ©ãƒ¼ã¯æ—©æœŸæ¤œå‡ºã€3 å›ãƒªãƒˆãƒ©ã‚¤å¾Œã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ |
| **Human in the Loop** | é‡è¦ãªæ±ºå®šã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèªå¿…é ˆ                     |

> ğŸ“– è¨­è¨ˆåŸå‰‡ã®è©³ç´°ã¯ [common.instructions.md](.github/instructions/common.instructions.md) ã‚’å‚ç…§ã€‚

---

## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ SSOT ãƒãƒƒãƒ—

| ãƒˆãƒ”ãƒƒã‚¯             | å®šç¾©å…ƒï¼ˆSSOTï¼‰                                                 |
| -------------------- | -------------------------------------------------------------- |
| PLAN ãƒ•ã‚§ãƒ¼ã‚ºç¢ºèª    | `.github/instructions/plan-phase.instructions.md`              |
| å‘½åè¦å‰‡ãƒ»ç®‡æ¡æ›¸ã   | `.github/instructions/common.instructions.md`                  |
| å“è³ªã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³     | `.github/instructions/quality-guidelines.instructions.md`      |
| ãƒ„ãƒ¼ãƒ«ä½¿ç”¨ãƒ•ãƒ­ãƒ¼     | `.github/instructions/tools-reference.instructions.md`         |
| IR ã‚¹ã‚­ãƒ¼ãƒ          | `workspace/content.schema.json`                                |
| **ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒª**   | **`.github/instructions/error-recovery.instructions.md`**      |
| **ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾å­˜**   | **`.github/instructions/script-dependencies.instructions.md`** |
| **ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿè¡Œé †åº** | **`.github/agents/reviewer.agent.md`**                         |

---

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸€è¦§

| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ                           | å½¹å‰²                              |
| ------------ | -------------------------------------- | --------------------------------- |
| Orchestrator | `.github/agents/orchestrator.agent.md` | çŠ¶æ…‹ç®¡ç†ãƒ»è¨ˆç”»ãƒ»ãƒªãƒˆãƒ©ã‚¤åˆ¶å¾¡      |
| Localizer    | `.github/agents/localizer.agent.md`    | ç¿»è¨³ã®ã¿ï¼ˆAI åˆ¤æ–­ï¼‰               |
| Summarizer   | `.github/agents/summarizer.agent.md`   | è¦ç´„ãƒ»å†æ§‹æˆï¼ˆAI åˆ¤æ–­ï¼‰           |
| Reviewer     | `.github/agents/reviewer.agent.md`     | å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆJSONãƒ»PPTX ä¸¡å¯¾å¿œï¼‰ |

## ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¸€è¦§

| ã‚¹ã‚¯ãƒªãƒ—ãƒˆ                 | ç”¨é€”                                 | è‡ªå‹•ä¿®æ­£æ©Ÿèƒ½             |
| -------------------------- | ------------------------------------ | ------------------------ |
| `classify_input.py`        | å…¥åŠ›åˆ†é¡ãƒ»æ–¹å¼åˆ¤å®š                   | -                        |
| `validate_content.py`      | IR ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼                      | -                        |
| `validate_pptx.py`         | PPTX æ¤œè¨¼                            | -                        |
| `create_from_template.py`  | PPTX ç”Ÿæˆ                            | AutoFit ç„¡åŠ¹åŒ–ã€ä½ç½®èª¿æ•´ |
| `create_clean_template.py` | å…ƒ PPTX ã‹ã‚‰ã‚¯ãƒªãƒ¼ãƒ³ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆ | ç¸¦æ–‡å­—é˜²æ­¢ã€è£…é£¾å‰Šé™¤     |
| `diagnose_template.py`     | ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå“è³ªè¨ºæ–­                 | -                        |
| `clean_template.py`        | ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°             | èƒŒæ™¯å‰Šé™¤ã€å‚ç…§ä¿®å¾©       |
| `analyze_template.py`      | ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆåˆ†æ â†’ layouts.json        | -                        |
| `workflow_tracer.py`       | ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ­ã‚°å‡ºåŠ›                     | -                        |

> ğŸ“– ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾å­˜é–¢ä¿‚ã¯ [script-dependencies.instructions.md](.github/instructions/script-dependencies.instructions.md) ã‚’å‚ç…§ã€‚

---

## æ¨™æº–ãƒ•ãƒ­ãƒ¼

```
INIT â†’ PLAN(ç¢ºèª) â†’ PREPARE_TEMPLATE â†’ EXTRACT â†’ [SUMMARIZE] â†’ TRANSLATE â†’ REVIEW(JSON) â†’ BUILD â†’ REVIEW(PPTX) â†’ DONE
          â†‘                                                                    â”‚                      â”‚
          â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€(FAILâ†’ä¿®æ­£ æœ€å¤§3å›)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                                                    â†“
     ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èªå¿…é ˆ                                                     ESCALATE(3å›è¶…)
```

### ãƒ•ã‚§ãƒ¼ã‚ºè©³ç´°

| ãƒ•ã‚§ãƒ¼ã‚º         | æ‹…å½“                    | å‡¦ç†å†…å®¹                                   |
| ---------------- | ----------------------- | ------------------------------------------ |
| INIT             | classify_input.py       | å…¥åŠ›æ¤œå‡ºã€base ç”Ÿæˆ â†’ classification.json  |
| PLAN             | Orchestrator            | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ–¹å¼ãƒ»æšæ•°ã‚’æç¤ºã—æ‰¿èªï¼ˆâ˜… å¿…é ˆï¼‰ |
| PREPARE_TEMPLATE | create_clean_template   | ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨ºæ–­ãƒ»ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ãƒ»ä½ç½®ä¿®æ­£   |
| EXTRACT          | ã‚¹ã‚¯ãƒªãƒ—ãƒˆç¾¤            | ç”»åƒæŠ½å‡º + content.json ç”Ÿæˆï¼ˆä¸¦åˆ—å¯ï¼‰     |
| SUMMARIZE        | Summarizer              | æšæ•°å‰Šæ¸›æ™‚ã®ã¿ï¼šè¦ç´„ãƒ»å†æ§‹æˆ               |
| TRANSLATE        | Localizer               | content.json â†’ content_ja.json             |
| REVIEW(JSON)     | Reviewer                | å“è³ªãƒã‚§ãƒƒã‚¯ â†’ åˆå¦åˆ¤å®š                    |
| BUILD            | create_from_template.py | PPTX ç”Ÿæˆï¼ˆè‡ªå‹•ä½ç½®èª¿æ•´ãƒ»AutoFit åˆ¶å¾¡ï¼‰    |
| REVIEW(PPTX)     | Reviewer                | æœ€çµ‚ç¢ºèª â†’ åˆå¦åˆ¤å®š                        |
| DONE             | Orchestrator            | PowerPoint èµ·å‹•ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰              |
| ESCALATE         | workflow_tracer.py      | 3 å›å¤±æ•—æ™‚ã®äººé–“ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³           |

### PREPARE_TEMPLATE ã§è‡ªå‹•ä¿®æ­£ã•ã‚Œã‚‹å•é¡Œ

| æ¤œå‡ºé …ç›®             | ä¿®æ­£å†…å®¹ | é–¢é€£å•é¡Œ             |
| -------------------- | -------- | -------------------- |
| ã‚¹ãƒ©ã‚¤ãƒ‰å¤–ã‚·ã‚§ã‚¤ãƒ—   | å‰Šé™¤     | #41 ç¸¦æ–‡å­—å•é¡Œ       |
| å·¦ç«¯ã®è£…é£¾ã‚·ã‚§ã‚¤ãƒ—   | å‰Šé™¤     | #35 ã‚¿ã‚¤ãƒˆãƒ«å¤–ã‚Œ     |
| ç‹­ã„ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ | å¹…æ‹¡å¼µ   | #39 ã‚¿ã‚¤ãƒˆãƒ«æŠ˜ã‚Šè¿”ã— |

### BUILD ã§è‡ªå‹•ä¿®æ­£ã•ã‚Œã‚‹å•é¡Œ

| æ¤œå‡ºé …ç›®                | ä¿®æ­£å†…å®¹       | é–¢é€£å•é¡Œ           |
| ----------------------- | -------------- | ------------------ |
| AutoFit ã«ã‚ˆã‚‹æ–‡å­—é–“éš”  | ç„¡åŠ¹åŒ–         | #42 æ—¥æœ¬èªæ–‡å­—é–“éš” |
| ã‚¿ã‚¤ãƒˆãƒ«ä½ç½®ï¼ˆSectionï¼‰ | 35%ã«å›ºå®š      | #43 ä½ç½®èª¿æ•´å•é¡Œ   |
| ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«ä½ç½®        | ã‚¿ã‚¤ãƒˆãƒ«+0.15" | #37 é›¢ã‚Œã™ãå•é¡Œ   |

> ğŸ“– ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒªè©³ç´°ã¯ [error-recovery.instructions.md](.github/instructions/error-recovery.instructions.md) ã‚’å‚ç…§ã€‚

---

## å…±é€š I/O å¥‘ç´„

| ç¨®åˆ¥         | ãƒ‘ã‚¹                            |
| ------------ | ------------------------------- |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ› | `input/`                        |
| ä¸­é–“ç”Ÿæˆç‰©   | `output_manifest/{base}_*.json` |
| ç”»åƒ         | `images/{base}/`                |
| æœ€çµ‚å‡ºåŠ›     | `output_ppt/{base}.pptx`        |

**base å‘½åè¦å‰‡**: `{YYYYMMDD}_{keyword}_{purpose}`

---

## æ–¹å¼é¸å®š

| ç”¨é€”                  | æ¨å¥¨æ–¹å¼                                | æ¨å¥¨åº¦     |
| --------------------- | --------------------------------------- | ---------- |
| **è‹±èª PPTXâ†’ æ—¥æœ¬èª** | reconstruct + create_from_template      | â­â­â­â­â­ |
| **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåˆ©ç”¨**  | analyze_template + create_from_template | â­â­â­â­â­ |
| ç™½ç´™ã‹ã‚‰æ–°è¦ä½œæˆ      | create_ja_pptx.py                       | â­â­â­â­   |
| ã‚³ãƒ¼ãƒ‰/æŠ€è¡“å†…å®¹å¤š     | pptxgenjs                               | â­â­â­â­   |

---

## é‹ç”¨ãƒ«ãƒ¼ãƒ«

- `.github/copilot-instructions.md` ã«å¾“ã†
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ/PPTX ã®ç›´æ¥ç·¨é›†ã¯ç¦æ­¢
- æ–°è¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½¿ç”¨æ™‚ã¯ `analyze_template.py` ã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®šã‚’ç”Ÿæˆ

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

éå»ã®å•é¡Œã¨å¯¾ç­–ã¯ **[docs/TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md)** ã‚’å‚ç…§ã€‚
